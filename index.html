<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Klotski Puzzle 3D State Space</title>
    <link href="https://fonts.googleapis.com/css2?family=Cal+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Klotski Puzzle 3D State Space</h1>
            <p>Create a Klotski puzzle and explore its 3D state space</p>
        </header>
        
        <div class="main-content">
            <div class="puzzle-panel">
                <h2>Design Your Puzzle</h2>
                <div class="controls">
                    <div class="board-size-controls">
                        <label for="board-width">Board Width:</label>
                        <input type="number" id="board-width" min="3" max="8" value="4">
                        <label for="board-height">Board Height:</label>
                        <input type="number" id="board-height" min="3" max="8" value="5">
                        <button id="apply-board-size" class="btn">Apply Size</button>
                    </div>
                    <button id="add-piece-1x1" class="btn">Add 1x1</button>
                    <button id="add-piece-1x2" class="btn">Add 1x2</button>
                    <button id="add-piece-2x1" class="btn">Add 2x1</button>
                    <button id="add-piece-2x2" class="btn">Add 2x2</button>
                    <button id="draw-custom-shape" class="btn">Draw Custom</button>
                    <button id="clear-board" class="btn btn-danger">Clear</button>
                    <button id="generate-space" class="btn btn-primary">Generate 3D Space</button>
                </div>
                
                <div class="board-container">
                    <div id="puzzle-board" class="puzzle-board"></div>
                    <canvas id="drawing-canvas" class="drawing-canvas" style="display: none;"></canvas>
                </div>
                
                <div class="drawing-controls" style="display: none;">
                    <button id="finish-shape" class="btn btn-primary">Finish Shape</button>
                    <button id="cancel-shape" class="btn btn-danger">Cancel</button>
                </div>
                
                <div class="info">
                    <div>Pieces: <span id="piece-count">0</span></div>
                    <div>States Found: <span id="state-count">0</span></div>
                </div>
            </div>
            
            <div class="space-panel">
                <h2>3D State Space</h2>
                <div id="three-container" class="three-container"></div>
                <div class="space-controls">
                    <button id="toggle-unreachable" class="btn">Show Unreachable States</button>
                    <button id="toggle-all-combinations" class="btn">Show All Combinations</button>
                    <button id="auto-rotate" class="btn">Auto Rotate</button>
                    <div class="slider-group">
                        <label>Node Size: <span id="node-size-value">1</span></label>
                        <input type="range" id="node-size" min="0.5" max="3" step="0.1" value="1">
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script type="importmap">
    {
        "imports": {
            "three": "https://esm.sh/three@0.158.0",
            "three/addons/": "https://esm.sh/three@0.158.0/examples/jsm/"
        }
    }
    </script>
    <script type="module" src="klotski.js"></script>
</body>
</html>
